/**
   Prepara relação de reservas com detalhamento de calculo para o Site de Locação

   @author    Wagner Mobile Costa
   @date      12/12/2009 11:40:00
   @function

   @param  iAgrupamento          Código do agrupamento (100=Por Reserva e 101=Por Centro de Custos)
   @param  in_lo1_login          Usuário do Site
   @param  in_lor_lote_ini       Número do Lote Inicial
   @param  in_lor_lote_fim       Número do Lote Final
   @param  in_lom_saida_ini      Data de Saída Inicial
   @param  in_lom_saida_fim      Data de Saída Final
   @param  in_loc_id_ini         Centro de Custos Inicial
   @param  in_loc_id_fim         Centro de Custos Final
   @param  in_a1_codcli          Código do Cliente

   Histórico
   ---------------------------------------------------------------------------------------------------------------------
   Legenda: [-] - Correção / [*] - Recurso modificado/melhorado / [+] - Implementação de recurso

   12/03/2011 09:30:00  v1.2  Wagner Mobile Costa.
      [*] BUG 849 - Melhoria na performance para seleção da aba "Detalhes da Reserva"

   21/05/2011 19:30:00  v1.3  Wagner Mobile Costa.
      [-] Atendimento 710 - Limitar o tamanho da variável para evitar erro de acordo com o nome do usuário no site
*/
Create or Replace Function mc_00234####???
( in in_agrupamento   integer,
  in in_lo1_login     varchar(16),
  in in_lor_lote_ini  integer,
  in in_lor_lote_fim  integer,
  in in_lom_saida_ini timestamp,
  in in_lom_saida_fim timestamp,
  in in_loc_id_ini    varchar(30),
  in in_loc_id_fim    varchar(30),
  in in_a1_codcli     integer
 )
Returns varchar(35)
As
$$
Begin
   if in_lo1_login is null then
      raise '[[Para geração do relatório via site deve ser informado usuário]]';
   end if;

   -- Executa a rotina para criar a massa de dados para o relatório
   perform mc_00235####???(in_lor_lote_ini, in_lor_lote_fim, in_lom_saida_ini, in_lom_saida_fim, in_loc_id_ini, in_loc_id_fim,
                           in_a1_codcli, in_agrupamento, sys_session(), 1, in_lo1_login);

   return sys_session();
End;
$$ language plpgsql;