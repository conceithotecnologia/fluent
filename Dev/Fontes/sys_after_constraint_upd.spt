/**
   Instruções executadas após criação de constraints

   @author    Wagner Mobile Costa
   @date      19/08/2012 22:00:00
   @function

   @param in_version Versão para execução dos Reparos
   @param in_executa Parametros da Execução do Reparo (1 -> Primeira Execução)

   Histórico
   ---------------------------------------------------------------------------------------------------------------------
   Legenda: [-] - Correção / [*] - Recurso modificado/melhorado / [+] - Implementação de recurso

   18/09/2012 17:02:04  v2    Ricardo Gonçalves.
      [-] Atruição do valor da variável de retorno.
*/
Create or Replace Function sys_after_constraint_upd####???
( In  in_version varchar,
  In  in_executa integer,
  out out_res Integer)
As $$
Declare
-- {Variáveis para cursores}
   vTable   varchar;
   vCodEmp  varchar;
   vFilial  varchar(3);
Begin

   -- Código para execução em Todas as Filiais
   vCodEmp := ####;
   vFilial := lpad(coalesce(???::varchar, '0'), 3, '0');

   -- Limpa o campo proprietário de campos da própria tabela
   --update ss040 set columnname_owner = null where codtable = codtable_print and not columnname_owner is null;

   -- Código para execução em Tabelas Compartilhadas/Normais
   If in_executa = 1 then
      vTable := 'ss071' || vCodEmp || vFilial;
      if exists(select 1
                  from information_schema.columns
                 where table_name = vtable
                   and column_name = 'report') then

         -- Limpa o campo proprietário de campos da própria tabela
         update [(ss071)] set columnname_owner = null where codtable = codtable_print and not columnname_owner is null;
      end if;
   end if;

   out_res := 1;
End;
$$ language 'plpgsql';