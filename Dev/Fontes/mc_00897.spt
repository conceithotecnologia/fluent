/**
   Altera estado do itens na fila de materiais de aguardando ação para aguardando saldo

	@author    Ricardo Gonçalves
	@date      30/09/2015
	@trigger   

	Histórico
	---------------------------------------------------------------------------------------------------------------------
   Legenda: [-] - Correção / [*] - Recurso modificado/melhorado / [+] - Implementação de recurso
*/
Create or Replace Function mc_00897####???() 
Returns integer As 
$$
Begin   
   update [(sdx)] f
      set sdx_status = 1
     from [(ss029)] s29
    where s29.recfile = f.recno
      and s29.session = sys_session()
      and s29.codform = 'REQUISICAO_FILA'
      and s29.codtable = 'SDX'
      and f.sdx_status = 0;

   if not Found then
      perform sys_msg####???(1, 'Não há registros selecionados ou não estão no estado "Aguardando Ação"');
   end if;

   return 1;   
END;
$$
  LANGUAGE 'plpgsql' VOLATILE;