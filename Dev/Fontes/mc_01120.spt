/**
   Pré-tratamento de lançamento no kardex

	@author    Ricardo Gonçalves
	@date      26/03/2018
	@trigger   E24 B IU

	Histórico
	---------------------------------------------------------------------------------------------------------------------
   Legenda: [-] - Correção / [*] - Recurso modificado/melhorado / [+] - Implementação de recurso
*/
CREATE OR REPLACE FUNCTION mc_01120####???()
  RETURNS trigger AS
$$
BEGIN    
   -- Tratamento de eventos de inventário e fechamento   
   if tg_op = 'INSERT' and new.e24_evento in (-1,1) then
      new.e24_saldo_u1 := new.e24_qtd_u1;      
      new.e24_saldo_u2 := new.e24_qtd_u2;
      
      new.e24_qtd_u1 := 0;      
      new.e24_qtd_u2 := 0;      
   end if;
   
   return new;   
END;
$$
  LANGUAGE 'plpgsql' VOLATILE;