/**
   Estoque - Verifica conciliação do item passado como parâmetro

	@author    Ricardo Gonçalves
	@date      14/02/2018
	@trigger
   
   @param in_pessoa  código do proprietário do estoque
   @param in_prod código do material que será verificado
   @param in_ficha código da ficha de estoque que deve ser checada
   @param in_data data que será verificada
   
   @return 1 caso esteja conciliado ou 0 caso contrário

	Histórico
	---------------------------------------------------------------------------------------------------------------------
   Legenda: [-] - Correção / [*] - Recurso modificado/melhorado / [+] - Implementação de recurso      
*/
Create or Replace Function mc_01106####???(
   in in_pessoa integer,
   in in_prod varchar,
   in in_ficha integer,
   in in_data date) 
Returns integer As
$$
Begin   
   if exists(
      select 1
        from [(a12)]
       where sfj_pessoa = in_pessoa
         and b1_codpro = in_prod
         and a4i_tipo = in_ficha
         and a12_data > in_data
         and a12_evento = -1)
   then
      return 1;
   end if;
   
   return 0;
End;
$$
language plpgsql;
