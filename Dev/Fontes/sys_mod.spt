/**
   Retorno o módulo para sessão atual

	@author    Ricardo Gonçalves
	@date      07/04/2010 15:42:23
	@trigger

	Histórico
	---------------------------------------------------------------------------------------------------------------------
   Legenda: [-] - Correção / [*] - Recurso modificado/melhorado / [+] - Implementação de recurso

   13/11/2010 12:03:12  v2    Ricardo Gonçalves.
      [+] Inclusão de proteção contra sessão nula.

*/
Create Or Replace Function sys_mod####???()
Returns varchar(02)
As
$$
Declare
   vmod  varchar(02);
Begin
   select modulo
     into vmod
     from [(ss027)]
    where session = sys_session();
    
   if not FOUND then
      raise '[[Não é possível recuperar o módulo porque a sessão na tabela ss027 não foi localizada.]]';
   end if;

   return vmod;
End;
$$
language plpgsql;