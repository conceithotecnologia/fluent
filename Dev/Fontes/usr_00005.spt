/**
   Cálculo da densidade a 20º

	@author    Ricardo Gonçalves
	@date      08/05/2012 20:00:58
	@trigger

   @param ensaio Conteúdo do campo "recno" da tabela [(b39)]

	Histórico
	---------------------------------------------------------------------------------------------------------------------
   Legenda: [-] - Correção / [*] - Recurso modificado/melhorado / [+] - Implementação de recurso
*/
CREATE OR REPLACE FUNCTION usr_00005####???(
   in ensaio integer)
  RETURNS void AS
$$
Declare
   r  record;
BEGIN
   -- Obtem os parâmetros do cálculo
   select a.b36_tamostra
     into r
     from [(b39)] e
          join [(b36)] a
            on a.recno = e.b36_recno
    where e.recno = ensaio;

   -- Atualiza ensaio
   update [(b39)]
      set b39_valor = (r.b36_tamostra - 20) * 0.00063 + b39_valord
    where recno = ensaio;
END;
$$
  LANGUAGE 'plpgsql' VOLATILE;