/**
   Marca uma posição no semáforo

	@author    Ricardo Gonçalves
	@date      12/03/2011 18:50:24
	@trigger

	@param codtable  Tabela marcada
   @param recno Registro da tabela

   @return 0 - Não marcado / 1 - Marcado

	Histórico
	---------------------------------------------------------------------------------------------------------------------
   Legenda: [-] - Correção / [*] - Recurso modificado/melhorado / [+] - Implementação de recurso
*/
Create or Replace Function mc_getflagc####???
(  In  in_codtable Varchar(20),
   In  in_recno    Integer,
   Out out_result  Integer )
As $$
Begin
   if not exists(
      select 1
        from ss009
       where codtable = upper(in_codtable)
         and modo = 1)
   then
      raise '[[Somente tabelas compartilhadas podem executar essa rotina de marcação]]';
   end if;

   -- Obtem a marcação
   Select recno Into out_result
     From [(ft3)]
    Where ft3_origem = upper(in_codtable)
      And ft3_recno  = in_recno;

   If out_result Is Not Null And out_result > 0 Then
      out_result := 1;
   Else
      out_result := 0;
   End if;
End;
$$ language plpgsql;
