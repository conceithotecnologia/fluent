/**
   Marcas a partida selecinodas em revisão como encerradas

	@author    Ricardo Gonçalves
	@date      17/12/2018
	@trigger   

	Histórico
	---------------------------------------------------------------------------------------------------------------------
   Legenda: [-] - Correção / [*] - Recurso modificado/melhorado / [+] - Implementação de recurso
*/
Create or Replace Function mc_01191####???() 
Returns integer As 
$$
Declare
   csession varchar;
Begin
   csession := sys_session();

   update [(sed)] b
      set sed_etapa = 4
     from [(ss029)] a
    where a.session = csession
      and a.codform = 'SED_02'
      and a.codtable = 'SED'
      and a.recfile = b.recno
      and b.sed_etapa = 3;

   delete 
     from [(ss029)] a
    where a.session = csession
      and a.codform = 'SED_02'
      and a.codtable = 'SED';

   return 1;
end;
$$ language plpgsql;
