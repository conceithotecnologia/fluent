/**
   Reprocessamento do custo médio

	@author    Ricardo Gonçalves
	@date      05/02/2013 17:13:00
	@trigger   
   
   @param in_tipomov Tipo de movimento que deverá ser reprocessado.
   @param in_prod código do produto. Caso esse parâmetro seja informado com nulo o sistema reprocessará todos os itens 
      do kardex.
   @param in_data data inicial para recalculo

	Histórico
	---------------------------------------------------------------------------------------------------------------------
   Legenda: [-] - Correção / [*] - Recurso modificado/melhorado / [+] - Implementação de recurso
   
   
*/
Create or Replace Function mc_00020####???(   
   in in_data date,      
   in in_tipomov integer,
   in in_codpro varchar)
returns integer
As $$
Begin
   -- Gera parâmetro de sessão. Não criticar estoque no reprocessamento;
   perform sys_00012####???('est_criticar', 'false');

   -- Reprocessamento do custo médio com atualização de saldo atual
   perform mc_01123####???(in_codpro, in_tipomov, in_data, true);
   
   -- Valor padrão
   perform sys_00012####???('est_criticar', 'true');
   
   return 1;
End;
$$ language plpgsql;