/**
   Valida a criação de serviço por natureza

	@author    Ricardo Gonçalves
	@date      05/10/2012 14:40:22
	@trigger   A00 B IUD

	Histórico
	---------------------------------------------------------------------------------------------------------------------
   Legenda: [-] - Correção / [*] - Recurso modificado/melhorado / [+] - Implementação de recurso
*/
CREATE OR REPLACE FUNCTION mc_00394####???()
  RETURNS trigger AS
$$
BEGIN
   if tg_op <> 'DELETE' then
      select coalesce(new.f1_codnat, f1_codnat)
        into new.f1_codnat
        from [(sew)]
       where sew_servico = new.sew_servico;

      if not ck_00007####???(new.f1_codnat) then
         raise '[[Natureza de operação % não pode ser utilizada porque está inativa.]]', new.f1_codnat;
      end if;

      return new;
   else
      return old;
   end if;
END;
$$
  LANGUAGE 'plpgsql' VOLATILE;