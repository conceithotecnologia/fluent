/**
   Cálculo da tensão interfacial

	@author    Ricardo Gonçalves
	@date      17/05/2011 14:22:06
	@trigger

	@param in_recno Conteúdo do campo "recno" da tabela [(b39)]

   Descrição:

   Fórmula não condensada, fornecida pela Labtrafo:

   TI Calculada = 0,7250 + RAIZ (((0,01452.P)/C².(D-d)) + 0,04534 - (1,679/(R/r))

   Onde:

   P = Leitura da escala do aparelho (tensão intefacial digitada)
   C = Circunferência do anel em centímetros
   D = Massa específica da água a 25º C em g/ml
   d = Massa específica da amostra a 25 º C em g/ml
   R = Raio do anel em cm
   r = Raio do fio do anel em cm

   Anéis Da LabTrafo

   DADOS DO ANEL (HERAEUS VECTRA)	unidade = cm
      Circunferência	6,082
      Raio do anel - R	0,968
      Raio do fio do anel - r	0,02
      Valor de R/r	48,38

   DADOS DO ANEL (KRÜSS)	unidade = cm
      Circunferência	5,997
      Raio do anel - R	0,9545
      Raio do fio do anel - r	0,0185
      Valor de R/r	51,59

	Histórico
	---------------------------------------------------------------------------------------------------------------------
   Legenda: [-] - Correção / [*] - Recurso modificado/melhorado / [+] - Implementação de recurso
*/
CREATE OR REPLACE FUNCTION usr_00003####???(
   in in_recno integer)
  RETURNS void AS
$$
Declare
   c     numeric(18, 4); -- Circunferência do anel em centímetros
   ra    numeric(18, 4); -- Raio do anel em cm
   rf    numeric(18, 4); -- Raio do fio do anel em cm
   r     record;
BEGIN
   ra := 0.968;
   rf := 0.02;
   c := 6.082;

   -- Atualiza ensaio
   update [(b39)]
      set b39_valor = b39_valord * (0.725 + (0.01452 * b39_valord / (c ^ 2 * (0.99707 - usr_00001####???(in_recno, 'densidade'))) + 0.04534 - (1.679 / (ra / rf))) ^ 0.5)
    where recno = in_recno;
END;
$$
  LANGUAGE 'plpgsql' VOLATILE;