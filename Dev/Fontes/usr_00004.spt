/**
   Calcula teor de água

	@author    Ricardo Gonçalves
	@date      06/05/2011 16:29:50
	@trigger

	@param ensaio Conteúdo do campo "recno" da tabela [(b39)]

	Histórico
	---------------------------------------------------------------------------------------------------------------------
   Legenda: [-] - Correção / [*] - Recurso modificado/melhorado / [+] - Implementação de recurso
   
   31/03/2012 19:22:45  v2    Ricardo Gonçalves.
      [*] Campo utilizado no cálculo foi trocado de b36_toleo para b36_tamostra.
*/
CREATE OR REPLACE FUNCTION usr_00004####???(
   in ensaio integer)
  RETURNS void AS
$$
Declare
   r  record;
BEGIN
   -- Obtem os parâmetros do cálculo
   select a.b36_tamostra
     into r
     from [(b39)] e
          join [(b36)] a
            on a.recno = e.b36_recno
    where e.recno = ensaio;

   -- Atualiza ensaio
   update [(b39)]
      set b39_valor = round(2.24 * 2.71828182845904 ^ (-0.04 * r.b36_tamostra) * b39_valord)
    where recno = ensaio;
END;
$$
  LANGUAGE 'plpgsql' VOLATILE;