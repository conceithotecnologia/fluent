/*==================================================================================================================================
| Empresa..: MultCont Informрtica                                                                                                  |
| -------------------------------------------------------------------------------------------------------------------------------- |
| Autor....: Jurandy da Silva Costa                                                                                                |
| -------------------------------------------------------------------------------------------------------------------------------- |
| Data.....: 28/04/2005 20:30:00                                                                                                   |
| -------------------------------------------------------------------------------------------------------------------------------- |
| Tipo.....: Stored Procedure                                                                                                      |
| -------------------------------------------------------------------------------------------------------------------------------- |
| Descriусo: Preenche Default da Natureza Financeira nas Transferencias - Bancos - FCA e FCB                                       |
| -------------------------------------------------------------------------------------------------------------------------------- |
| Parametros                                                                                                                       |
|  [Entrada]ииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииииии |
             sys_session(): Id da sessсo ativa - IP / Empresa / Filial
==================================================================================================================================*/
Create or Replace Function mc_whenfca####???
( out out_res Integer)
As $$
Declare
   iNatureza   Integer; -- Cзdigo da Natureza Financeira
Begin
   out_res:= 0;
   -- Busca o conteЩdo atual do campo Natureza Financeira
   iNatureza:= sys_042integer####???('f1_codnat');

   -- Caso a Natureza ainda nсo tenha sido preenchida busca o Default na configuraусo
   If iNatureza Is Null Then
      Select transfe_bco
        Into iNatureza
        From [(fcc)] Limit 1;
      -- Atualiza a tabela de sessсo com a Natureza Financeira Default
      Update [(ss042)]
         Set integer_ = iNatureza
       Where session = sys_session()
         And Columnname = 'f1_codnat';
   End If;
   
   out_res:= 1;
End;
$$ language plpgsql;
