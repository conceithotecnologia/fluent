/**
   Checa se a localização está ativa em uma determinada data

	@author    Ricardo Gonçalves
	@date      22/03/2018
	@trigger

	Histórico
	---------------------------------------------------------------------------------------------------------------------
   Legenda: [-] - Correção / [*] - Recurso modificado/melhorado / [+] - Implementação de recurso
*/
Create or Replace Function ck_00018####???(  
   in in_codpro varchar,
   in in_data date,
   out out_localiz integer ) As 
$$
Declare
   data date;
Begin
   data := coalesce(in_data, current_date);
   
   Select sbf_localiz
     Into out_localiz
     From [(sbf)]
    Where b1_codpro = in_codpro
      and sbf_localiz_data <= data;

   out_localiz := coalesce(out_localiz, 0);
End;
$$ language plpgsql;

